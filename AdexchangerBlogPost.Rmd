---
title: "adexchanger blog post"
author: "mark davenport"
date: "January 9, 2016"
output: html_document
---


```{r include=FALSE}
library(tm)
library(knitr)
library(wordcloud) 
library(ggplot2)
library(dplyr)
library(knitr)
library(topicmodels)
library(reshape2)

load('/Users/markdavenport/Documents/adexchanger-emails/dtm.RData')


```

### introduction
adtech is an echo chamber. there are only a small number of media outlets that cover our industry, largely because it's so niche, and the result is a relatively small number of people owning a large amount of the discourse. what that results in are ebbs and flows of ideas; topics come into style very quickly and dominate the industry conversation (e.g. ad-blocking), while other topics fall out of favor just as fast (e.g. native).  

in this post, i am going to explore some of these ebbs and flows in ideas in the industry by analyzing the words from adexchanger daily newsletters over the last few years. my goal is to understand which topics dominated the industry conversation over time, which ones led short lives, and which ones will persist into 2016.  

before i do, i want to give a brief background on text analysis.   

### text analysis
i started subscribing to the adexchanger daily newsletter in november of 2011. for this post, i took each of the emails i received through the end of december of 2015 and scraped the text from each email. the daily newsletter is broken into sections, and for this post i focused on the portions starting from "Today from Adexchanger..." and stopping at "But wait, there's more!"  

once i scraped the text, i did some processing of all the words. without going into gory details, i'll give an example to explain what kind of processing i did.  

consider this sentence: "Many advertisers were advertising with advertisements in major media markets last year, across the U.S.A. and Europe." to get at the interesting stuff, i removed any URLs, made everything lowercase, removed punctuation, removed commonly used words (e.g. "the" or "and"), and stemmed the words so that words like "advertisers" and "advertising" relate to the same word. doing all of that and counting word occurrences resulted in our sentence being reduced to this: 

```{r echo=FALSE}
# build a corpus, and specify the source to be character vectors

myCorpus <- Corpus(VectorSource('Many advertisers were advertising with advertisements in major media markets last year, across the U.S.A. and Europe.'))
myCorpus <- tm_map(myCorpus,
                   content_transformer(function(x) iconv(x, to='UTF-8-MAC', sub='byte')),
                   mc.cores=1)

myCorpus <- tm_map(myCorpus, content_transformer(tolower))
# remove punctuation
myCorpus <- tm_map(myCorpus, removePunctuation) 
# remove numbers
myCorpus <- tm_map(myCorpus, removeNumbers)

# add two extra stop words: 'available' and 'via'
myStopwords <- c(stopwords("english"))
myCorpus <- tm_map(myCorpus, removeWords, myStopwords)

#ï¿¼# keep a copy of corpus to use later as a dictionary for stem
# completion
myCorpusCopy <- myCorpus
# stem words
myCorpus <- tm_map(myCorpus, stemDocument, language="english")
myCorpus <- tm_map(myCorpus, PlainTextDocument)

dtmExample <-  DocumentTermMatrix(myCorpus)
rownames(dtmExample) <- "my corpus"
kable(as.matrix(dtmExample))

```

### rtb vs programmatic

the first trend that's interesting is the description of our industry: 2013 was the death of RTB. in that year, programmatic became the nom de rigueur for our industry. 

```{r, echo=FALSE}

termToExplore1 <- 'rtb'
termToExplore2 <- 'programmat'

  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])
  term_to_compare2 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore2)])
  
  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)
  df[,'percentMentions2'] <- as.numeric(term_to_compare2/all_terms)

  colnames(df) <- c('dt','percentMentions1','percentMentions2')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1,termToExplore2)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,'vs',termToExplore2,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))






```


### remnant inventory
in the year 2013, we also witnessed the death of "remnant" inventory. no one wants to talk about it, it's not descriptive anymoref or the inventory we're dealing in. 

```{r, echo=FALSE}


termToExplore1 <- 'remnant'


  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)

  colnames(df) <- c('dt','percentMentions1')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))



```




### adblocking
the topic of 2015 was definitely ad-blocking. there was >8x increase in use of that word in 2015 than in the years 2011-2014. 

```{r, echo=FALSE}

termToExplore1 <- 'adblock'
#termToExplore2 <- 'block'

  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])
#  term_to_compare2 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore2)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)
#  df[,'percentMentions2'] <- as.numeric(term_to_compare2/all_terms)

#  colnames(df) <- c('dt','percentMentions1','percentMentions2')
  colnames(df) <- c('dt','percentMentions1')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
#       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1,termToExplore2)))) +
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1)))) +
    geom_point(shape=1) +    # Use hollow circles
#    ggtitle(paste("Terms to compare:",termToExplore1,'vs',termToExplore2,sep=" ")) +
    ggtitle(paste("Terms to compare:",termToExplore1,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))

#(sum(term_to_compare1[39:50])/sum(all_terms[39:50]))/(sum(term_to_compare1[1:38])/sum(all_terms[1:38]))

```


### viewability

we can also see the uptick in viewability as a big trend of 2015. it was mentioned 3x more this year than in years past.  

```{r, echo=FALSE}


termToExplore1 <- 'viewabl'
termToExplore2 <- 'view'

  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])
  term_to_compare2 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore2)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)
  df[,'percentMentions2'] <- as.numeric(term_to_compare2/all_terms)

  colnames(df) <- c('dt','percentMentions1','percentMentions2')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1,termToExplore2)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,'vs',termToExplore2,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))




```

### fraud

fraud has been a large topic in the news, increasing consistently from the end of 2011 to the end of 2015. fraud has leveled off. it is important that we as an industry continue to discuss it, but i expect it to remain at about the same percent of word usage. 

```{r, echo=FALSE}


termToExplore1 <- 'fraud'


  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)

  colnames(df) <- c('dt','percentMentions1')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))



```






### native

native was big in 2014, but it was been less prevalent in the conversation in 2015. 

```{r, echo=FALSE}

termToExplore1 <- 'nativ'


  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)

  colnames(df) <- c('dt','percentMentions1')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))



```

### mobile

native was big in 2014, but it was been less prevalent in the conversation in 2015. 

```{r, echo=FALSE}

termToExplore1 <- 'mobil'


  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)

  colnames(df) <- c('dt','percentMentions1')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))



```



### inhous

the trned towards taking things "in-house" peaked in 2014, but has not been as large a part of the conversation in 2015.  

```{r, echo=FALSE}



termToExplore1 <- 'inhous'


  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)

  colnames(df) <- c('dt','percentMentions1')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))



```




### politics

big increase in the use of "politics." 


```{r, echo=FALSE}



termToExplore1 <- 'polit'


  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)

  colnames(df) <- c('dt','percentMentions1')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))



```

### ipo

big increase in the use of "politics." 


```{r, echo=FALSE}



termToExplore1 <- 'ipo'


  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)

  colnames(df) <- c('dt','percentMentions1')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))



```





### omnichannel



```{r echo=FALSE}
  
#termToExplore1 <- 'inapp'
#termToExplore2 <- 'crossdevic'
#termToExplore3 <- 'multichannel'
termToExplore1 <- 'multichannel'
termToExplore2 <- 'omnichannel'

  all_terms <- rowSums(as.matrix(dtm))
  term_to_compare1 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore1)])
  term_to_compare2 <- as.matrix(dtm[,which(colnames(dtm)==termToExplore2)])
  

  dts <- data.frame(as.Date(paste(substr(rownames(dtm),1,4),substr(rownames(dtm),5,6),'01',sep='/')))
  
  df <- data.frame(dts)
  df[,'percentMentions1'] <- as.numeric(term_to_compare1/all_terms)
  df[,'percentMentions2'] <- as.numeric(term_to_compare2/all_terms)

  colnames(df) <- c('dt','percentMentions1','percentMentions2')
  df_plot <- melt(df, id="dt")
  
  ggplot(data=df_plot,
       aes(x=dt, y=value, color=factor(variable,labels=c(termToExplore1,termToExplore2)))) +
    geom_point(shape=1) +    # Use hollow circles
    ggtitle(paste("Terms to compare:",termToExplore1,'vs',termToExplore2,sep=" ")) +
    xlab("Date of Newsletter") +
    ylab("Proportion of words dedicated to term") + 
    geom_smooth(se = FALSE) + labs(color = "Terms to Compare")  +
    scale_y_continuous(limits = c(0, NA))



  
```


### omnichannel

some conclusions  
* RTB and remnant inventory is dead as a description of our industry. programmatic is the nom de rigueur.  
* adblocking was the hottest topic of 2015  
* viewability was a large topic of 2015  
* fraud as a topic is leveling off, and i'd expect it to plateau in word count  
* native advertising is less interesting in 2015 than in 2014. mobile peaked in 2013, likely everyone trying to get their "year of mobile" predictions in  
* taking it "in-house" was much less a part of the conversation in 2015 than in 2014.  
* politics is a growing topic, and will continue to be a big topic in 2016 with the election.  
* discussions about adtech financial activity has declined since 2013, and we're currently in a trough


